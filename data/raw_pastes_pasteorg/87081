b' <!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1">  <meta name="description" content="www.paste.org - allows users to paste snippets of text, usually samples of source code, for public viewing."> <meta name="author" content="An Australian"> <link rel="icon" href="/favicon.ico"> <title>Paste code - paste.org</title>  <link href="/assets/themes/bleh/css/github-highlight.css" rel="stylesheet"> <script src="/assets/themes/bleh/js/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();</script> </head> <body> <p><pre><code class="nohighlight">include &lt;stdio&gt;\n#include &lt;stdlib&gt;\n#include &lt;omp&gt;\n\nint main (int argc, char *argv[])\n{\n  int i, count, samples, nthreads, seed;\n  struct drand48_data drand_buf;\n  double x, y;\n  double t0, t1;\n\n  samples  = atoi(argv[1]);\n  nthreads = atoi(argv[2]);\n  omp_set_num_threads (nthreads);\n\n  t0 = omp_get_wtime();\n  count = 0;\n\n#pragma omp parallel private(i, x, y, seed, drand_buf) shared(samples)\n{\n  seed = 1202107158 + omp_get_thread_num() * 1999;\n  srand48_r (seed, &amp;drand_buf);\n\n#pragma omp for reduction(+:count)\n  for (i=0; i&lt;samples; i++) {\n    drand48_r (&amp;drand_buf, &amp;x);\n    drand48_r (&amp;drand_buf, &amp;y);\n    if (x*x + y*y &lt;= 1.0) count++;\n  }\n}\n\n  t1 = omp_get_wtime();\n  printf(&quot;Estimate of pi: %7.5f\\n&quot;, 4.0*count/samples);\n  printf(&quot;Time: %7.2f\\n&quot;, t1-t0);\n}</code></pre></p> <p align="right"><span style="font-size: 60%">Add a code snippet to your website: <a href="https://www.paste.org" target="_blank">www.paste.org</a></span></p> </body> </html>'