b' <!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1">  <meta name="description" content="www.paste.org - allows users to paste snippets of text, usually samples of source code, for public viewing."> <meta name="author" content="An Australian"> <link rel="icon" href="/favicon.ico"> <title>Paste code - paste.org</title>  <link href="/assets/themes/bleh/css/github-highlight.css" rel="stylesheet"> <script src="/assets/themes/bleh/js/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();</script> </head> <body> <p><pre><code class="csharp">private static AmountsToPay SetAmountsToPay(EntityPolicy policy)\r\n        {\r\n            AmountsToPay amountsToPay = new AmountsToPay() { \r\n                AllowPayment = false,\r\n                MinimumAmountDue = 0,\r\n                CurrentAmountDue = 0\r\n            };\r\n\r\n            try\r\n            {\r\n                if (policy.PaymentDueDate.ToShortDateString() != &quot;1/1/0001&quot; &amp;&amp; (DateTime.Now - policy.CancellationDate).Days &lt; 30)\r\n                    amountsToPay.PaymentDueDate = policy.PaymentDueDate.ToString(&quot;MM/dd/yyyy HH:mm:ss&quot;);\r\n\r\n               if (policy.Status == &quot;9&quot;)\r\n                {\r\n                    return amountsToPay;\r\n\r\n                }\r\n                else if (policy.FullBalance == 0 &amp;&amp; policy.PaymentPlan.IndexOf(&quot;EFT&quot;) == -1)\r\n                {\r\n                    return amountsToPay;\r\n                }\r\n                else if (policy.Status != &quot;C&quot; &amp;&amp; policy.Status != &quot;L&quot; &amp;&amp; policy.PaymentPlan.IndexOf(&quot;EFT&quot;) &gt; -1)\r\n                {\r\n                    return amountsToPay;\r\n                }\r\n                else if ((policy.Status == &quot;C&quot; || policy.Status == &quot;L&quot;) &amp;&amp; policy.PaymentPlan.IndexOf(&quot;EFT&quot;) &gt; -1 &amp;&amp; policy.PaymentHistory.Where(x =&gt; (DateTime.Now - x.AccountingDate).Days == 0 || x.Status.ToUpper() == &quot;ENTERED&quot;).Count() &lt; 1)\r\n                {     \r\n                    if (policy.Status == &quot;L&quot;)\r\n                    {\r\n                        //&lt;label id=&quot;AmountPaymentDueReinstateNot&quot; style=&quot;margin-top:0px; vertical-align:middle; &quot;&gt;@dto.FullBalance.ToString(&quot;C&quot;)&lt;/label&gt;\r\n                    }\r\n\r\n                    if (policy.Status == &quot;C&quot; || ((DateTime.Now - policy.CancellationDate).Days &lt;= 30 &amp;&amp; policy.PayToReinstate &gt; 0 &amp;&amp; ((DateTime.Now - policy.LastDayToReinstate).Days &lt; 0)))\r\n                    {\r\n                        amountsToPay.AllowPayment = true;\r\n                        amountsToPay.MinimumAmountDue = policy.PayToReinstate;\r\n                        amountsToPay.CurrentAmountDue = policy.PayToReinstate;\r\n                    }\r\n                }\r\n                else if (policy.FullBalance &lt;= 0 &amp;&amp; policy.IsRenewalOffer == false &amp;&amp; (policy.Status != &quot;C&quot; &amp;&amp; policy.Status != &quot;L&quot;))\r\n                {\r\n                    return amountsToPay;\r\n                }\r\n                else if (policy.PaymentHistory.Where(x =&gt; (DateTime.Now - x.AccountingDate).Days == 0 || x.Status.ToUpper() == &quot;ENTERED&quot;).Count() &gt; 0)\r\n                {\r\n                    return amountsToPay;\r\n                }\r\n                else if (policy.Status == &quot;C&quot; || policy.Status == &quot;A&quot; || !policy.DisplayAmountDue)\r\n                {\r\n                    if (policy.AmountDue &gt; 0 &amp;&amp; ((DateTime.Now - policy.PaymentDueDate).Days &lt; 30 || policy.StatusDescription == &quot;CP/Payment&quot;))\r\n                    {\r\n                        amountsToPay.AllowPayment = true;\r\n                        amountsToPay.CurrentAmountDue = policy.AmountDue;\r\n                        amountsToPay.MinimumAmountDue = policy.AmountDue;\r\n                    }\r\n                    if (policy.FullBalance &gt; 0 &amp;&amp; ((DateTime.Now - policy.LastDayToReinstate).Days &lt; 0 || policy.StatusDescription == &quot;CP/Payment&quot;))\r\n                    {\r\n                        //&lt;label id=&quot;AmountPaymentFull&quot; style=&quot;margin-top:0px; vertical-align:middle; &quot;&gt;@dto.FullBalance.ToString(&quot;C&quot;)&lt;/label&gt;\r\n                    }\r\n                    if (policy.FullBalance &gt; 0 &amp;&amp; ((DateTime.Now - policy.LastDayToReinstate).Days &lt; 0 || policy.StatusDescription == &quot;Active&quot;))\r\n                    {\r\n                        //&lt;label id=&quot;AmountPaymentFull&quot; style=&quot;margin-top:0px; vertical-align:middle; &quot;&gt;@dto.FullBalance.ToString(&quot;C&quot;)&lt;/label&gt;\r\n                    }\r\n                    else if (policy.FullBalance &gt; 0 &amp;&amp; policy.Status == &quot;Y&quot; &amp;&amp; policy.IsRenewalOffer == false)\r\n                    {\r\n                        //&lt;label id=&quot;AmountPaymentFull&quot; style=&quot;margin-top:0px; vertical-align:middle; &quot;&gt;@dto.FullBalance.ToString(&quot;C&quot;)&lt;/label&gt;\r\n                    }\r\n                }\r\n                else if (policy.PaymentPlan.IndexOf(&quot;EFT&quot;) == -1 || policy.Status == &quot;9&quot; &amp;&amp; ((DateTime.Now - policy.CancellationDate).Days &gt;= 30))\r\n                {\r\n                    if (policy.FullBalance &gt; 0 &amp;&amp; policy.Status != &quot;L&quot;)\r\n                    {\r\n                        //&lt;label id=&quot;AmountPaymentFullCancellation&quot; style=&quot;margin-top:0px; vertical-align:middle; &quot;&gt;@dto.FullBalance.ToString(&quot;C&quot;)&lt;/label&gt;\r\n                    }\r\n                }\r\n                if (policy.IsRenewalOffer == true &amp;&amp; policy.PaymentPlan.IndexOf(&quot;EFT&quot;) == -1)\r\n                {\r\n                    if (policy.AmountDue &gt; 0)\r\n                    {\r\n                        amountsToPay.AllowPayment = true;\r\n                        amountsToPay.CurrentAmountDue = policy.AmountDue;\r\n                        amountsToPay.MinimumAmountDue = policy.AmountDue;\r\n                    }\r\n                    if (policy.RenewThreeMonth &gt; 0)\r\n                    {\r\n                                    \r\n                    }\r\n                    if (policy.RenewSixMonth &gt; 0)\r\n                    {\r\n                                    \r\n                    }\r\n                    if (policy.RenewSixMonthly &gt; 0)\r\n                    {\r\n                        amountsToPay.AllowPayment = true;\r\n                        amountsToPay.MinimumAmountDue = policy.RenewSixMonthly;\r\n                        amountsToPay.CurrentAmountDue = policy.RenewSixMonthly;\r\n                    }\r\n                }\r\n                if (policy.Status == &quot;L&quot; &amp;&amp; policy.PaymentPlan.IndexOf(&quot;EFT&quot;) == -1 || policy.Status == &quot;9&quot; &amp;&amp; ((DateTime.Now - policy.CancellationDate).Days &lt; 30))\r\n                {\r\n\r\n                    if (policy.MinAmountToReinstate &gt; 0 &amp;&amp; policy.Status == &quot;L&quot;)\r\n                    {\r\n                        //&lt;label id=&quot;AmountPaymentDueReinstateNot&quot; style=&quot;margin-top:0px; vertical-align:middle; &quot;&gt;@dto.MinAmountToReinstate.ToString(&quot;C&quot;)&lt;/label&gt;\r\n                    }\r\n                    if (policy.PayToReinstate &gt; 0 &amp;&amp; ((DateTime.Now - policy.LastDayToReinstate).Days &lt; 0))\r\n                    {\r\n                        amountsToPay.AllowPayment = true;\r\n                        amountsToPay.MinimumAmountDue = policy.PayToReinstate;\r\n                        amountsToPay.CurrentAmountDue = policy.PayToReinstate;\r\n                    }\r\n                    if (policy.BalancePolicy &gt; 0 &amp;&amp; ((DateTime.Now - policy.LastDayToReinstate).Days &lt; 0))\r\n                    {\r\n                        //&lt;label id=&quot;AmountPaymentFullBalanceReinstate&quot; style=&quot;margin-top:0px; vertical-align:middle; &quot;&gt;@dto.BalancePolicy.ToString(&quot;C&quot;)&lt;/label&gt;\r\n                    }\r\n                }\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                throw e;\r\n            }\r\n\r\n            return amountsToPay;\r\n        }</code></pre></p> <p align="right"><span style="font-size: 60%">Add a code snippet to your website: <a href="https://www.paste.org" target="_blank">www.paste.org</a></span></p> </body> </html>'