b' <!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1">  <meta name="description" content="www.paste.org - allows users to paste snippets of text, usually samples of source code, for public viewing."> <meta name="author" content="An Australian"> <link rel="icon" href="/favicon.ico"> <title>Paste code - paste.org</title>  <link href="/assets/themes/bleh/css/github-highlight.css" rel="stylesheet"> <script src="/assets/themes/bleh/js/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();</script> </head> <body> <p><pre><code class="cpp">#include &lt;amxmodx&gt;\n#include &lt;fakemeta&gt;\n#include &lt;engine&gt;\n#include &lt;fun&gt;\n#include &lt;zombieplague&gt;\n\n#define PLUGIN &quot;[ZP] Class - Warlock&quot;\n#define VERSION &quot;1.3&quot;\n#define AUTHOR &quot;HoRRoR&quot;\n\n#define message_begin_f(%1,%2,%3) (engfunc (EngFunc_MessageBegin, %1, %2, %3))\n#define write_coord_f(%1) (engfunc (EngFunc_WriteCoord, %1))\n\nnew const zclass_name[] = { &quot;Warlock&quot; }\nnew const zclass_info[] = { &quot;- Can heal teammates&quot; }\nnew const zclass_model[] = { &quot;zombie_leech&quot; }\nnew const zclass_clawmodel[] = { &quot;v_zombie.mdl&quot; }\nconst zclass_health = 1600\nconst zclass_speed = 260\nconst Float:zclass_gravity = 0.9\nconst Float:zclass_knockback = 1.0\nconst zclass_infecthp = 200\n\nnew g_zclass_warlock\nnew i_cooldown_time[33] = 0\nnew g_cooldown[33] = 0\nnew g_maxplayers\nnew heal_count[33] = 0\nenum Coord_e {Float:x, Float:y, Float:z};\n\n// --- config ------------------------ //\n#define RADIUS 300\n#define COLOR_R 0\n#define COLOR_G 255\n#define COLOR_B 0\nnew g_can_heal_on_swarm = 1 //if 1 - can heal one time on swarm or plague mode, if 0 - can\'t\nnew Float:g_heal_cooldown = 15.0 //cooldown time\nnew const sound_heal_event[] = &quot;zombie_plague/spells/zombie_warlock/BurningSpirit.wav&quot; //heal sound\n// ----------------------------------- //\n\n\npublic plugin_precache()\n{\n g_zclass_warlock = zp_register_zombie_class(zclass_name, zclass_info, zclass_model, zclass_clawmodel, zclass_health, zclass_speed, zclass_gravity, zclass_knockback) \n precache_sound(sound_heal_event)\n}\n\npublic plugin_init() \n{\n register_plugin(PLUGIN, VERSION, AUTHOR)\n register_clcmd&amp;#40;&quot;ability1&quot;, &quot;use_ability_one&quot;&amp;#41;\n register_concmd&amp;#40;&quot;ability1&quot;, &quot;use_ability_one&quot;&amp;#41;\n g_maxplayers = get_maxplayers()\n register_logevent(&quot;roundStart&quot;, 2, &quot;1=Round_Start&quot;)\n}\n\n\npublic use_ability_one(healer)\n{\n if (is_valid_ent(healer) &amp;&amp; is_user_alive(healer) &amp;&amp; (zp_get_user_zombie_class(healer) == g_zclass_warlock) &amp;&amp; zp_get_user_zombie(healer) &amp;&amp; !zp_get_user_nemesis(healer) &amp;&amp; (g_cooldown[healer] == 0) &amp;&amp; (heal_count[healer] &gt; 0))\n {\n  new Distance\n  for (new i = 1; i &lt;= g_maxplayers; i++)\n  {\n   if (is_valid_ent(i) &amp;&amp; is_user_alive(i) == 1 &amp;&amp; zp_get_user_zombie(i) &amp;&amp; !zp_get_user_nemesis(i))\n   {\n    Distance = get_entity_distance(i, healer)\n    if (Distance &lt;= RADIUS) \n    {\n     if(get_user_health(i) &lt; zp_get_zombie_maxhealth(i) &amp;&amp; !zp_get_user_first_zombie(i))\n      set_user_health(i, zp_get_zombie_maxhealth(i))\n     else\n      set_user_health(i, get_user_health(i) + 250)\n    }\n   }\n  }\n  \n  emit_sound(healer, CHAN_STREAM, sound_heal_event, 1.0, ATTN_NORM, 0, PITCH_NORM)\n  \n  static Coord_e:vecOrigin [Coord_e]; \n  pev (healer,pev_origin, vecOrigin); \n\n  message_begin_f (MSG_PVS, SVC_TEMPENTITY, vecOrigin, 0); \n  write_byte (TE_DLIGHT); \n  write_coord_f (vecOrigin [x ]); \n  write_coord_f (vecOrigin [y ]); \n  write_coord_f (vecOrigin [z ]); \n  write_byte (RADIUS); \n  write_byte (COLOR_R); //red \n  write_byte (COLOR_G); //green \n  write_byte (COLOR_B); //blue \n  write_byte (8);//life \n  write_byte (40);//decay \n  message_end();\n  \n  i_cooldown_time[healer] = floatround(g_heal_cooldown)\n  set_task(1.0, &quot;ShowHUD&quot;, healer, _, _, &quot;a&quot;,i_cooldown_time[healer])\n  \n  set_task(g_heal_cooldown,&quot;healer_ability_cooldown&quot;,healer)\n  g_cooldown[healer] = 1\n  heal_count[healer] = heal_count[healer] - 1;\n  \n  new text[100]\n  format(text,99,&quot;^x04[ZP]^x01 Now you can heal ^x04%d^x01 times.&quot;,heal_count[healer])\n  message_begin(MSG_ONE,get_user_msgid(&quot;SayText&quot;),{0,0,0},healer) \n  write_byte(healer) \n  write_string(text) \n  message_end()\n  \n }\n \n if (is_valid_ent(healer) &amp;&amp; (zp_get_user_zombie_class(healer) == g_zclass_warlock) &amp;&amp; zp_get_user_zombie(healer) &amp;&amp; !zp_get_user_nemesis(healer) &amp;&amp; (heal_count[healer] == 0))\n {\n  new text[100]\n  format(text,99,&quot;^x04[ZP]^x01 Your must infect someone to use your ability.&quot;)\n  message_begin(MSG_ONE,get_user_msgid(&quot;SayText&quot;),{0,0,0},healer) \n  write_byte(healer) \n  write_string(text) \n  message_end()\n }\n}\n\npublic ShowHUD(id)\n{\n if(is_valid_ent(id) &amp;&amp; is_user_alive(id))\n {\n  i_cooldown_time[id] = i_cooldown_time[id] - 1;\n  set_hudmessage(200, 100, 0, 0.75, 0.92, 0, 1.0, 1.1, 0.0, 0.0, -1)\n  show_hudmessage(id, &quot;Renew cooldown: %d&quot;,i_cooldown_time[id])\n }else{\n  remove_task(id)\n }\n}\n\npublic healer_ability_cooldown(id)\n{\n if (is_valid_ent(id) &amp;&amp; (zp_get_user_zombie_class(id) == g_zclass_warlock) &amp;&amp; zp_get_user_zombie(id) &amp;&amp; !zp_get_user_nemesis(id))\n {\n  g_cooldown[id] = 0\n  new text[100]\n  format(text,99,&quot;^x04[ZP]^x01 Your ability ^x04Renew^x01 is ready.&quot;)\n  message_begin(MSG_ONE,get_user_msgid(&quot;SayText&quot;),{0,0,0},id) \n  write_byte(id) \n  write_string(text) \n  message_end()\n }\n}\n\npublic roundStart()\n{\n for (new i = 1; i &lt;= g_maxplayers; i++)\n {\n  g_cooldown[i] = 0\n  heal_count[i] = 0\n  i_cooldown_time[i] = floatround(g_heal_cooldown)\n\n  remove_task(i)\n }\n}\n\npublic zp_user_humanized_post(id)\n{\n remove_task(id)\n}\n\npublic zp_user_infected_post(id, infector)\n{\n if ((zp_get_user_zombie_class(id) == g_zclass_warlock) &amp;&amp; !zp_get_user_nemesis(id))\n {\n  new text[100]\n  new note_cooldown = floatround(g_heal_cooldown)\n  format(text,99,&quot;^x04[ZP]^x01 Your ability is ^x04Renew^x01. Cooldown:^x04 %d ^x01seconds.&quot;,note_cooldown)\n  message_begin(MSG_ONE,get_user_msgid(&quot;SayText&quot;),{0,0,0},id) \n  write_byte(id) \n  write_string(text) \n  message_end()\n  \n  i_cooldown_time[id] = floatround(g_heal_cooldown)\n  remove_task(id)\n  \n  g_cooldown[id] = 0\n  \n  if ((zp_is_swarm_round() || zp_is_plague_round()) &amp;&amp; g_can_heal_on_swarm == 1)\n  {\n   heal_count[id] = 1\n  }else{\n   heal_count[id] = 1\n  }\n  client_cmd&amp;#40;id,&quot;bind F1 ability1&quot;&amp;#41;\n }\n \n if (zp_get_user_zombie_class(infector) == g_zclass_warlock)\n {\n  heal_count[infector] = heal_count[infector] + 1;\n  \n  new text[100]\n  format(text,99,&quot;^x04[ZP]^x01 Now you can heal ^x04%d^x01 times.&quot;,heal_count[infector])\n  message_begin(MSG_ONE,get_user_msgid(&quot;SayText&quot;),{0,0,0},infector) \n  write_byte(infector) \n  write_string(text) \n  message_end()\n }\n}\n</code></pre></p> <p align="right"><span style="font-size: 60%">Add a code snippet to your website: <a href="https://www.paste.org" target="_blank">www.paste.org</a></span></p> </body> </html>'