b' <!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1">  <meta name="description" content="www.paste.org - allows users to paste snippets of text, usually samples of source code, for public viewing."> <meta name="author" content="An Australian"> <link rel="icon" href="/favicon.ico"> <title>Paste code - paste.org</title>  <link href="/assets/themes/bleh/css/github-highlight.css" rel="stylesheet"> <script src="/assets/themes/bleh/js/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();</script> </head> <body> <p><pre><code class="delphi">type\n  PMsg = ^Tmsg;\n  TMsg = packed record\n    byte_1: Byte;\n    command: word;\n    len: Word;\n    str: WideString;\n  end;\n\n  PUser = ^TUser;\n  TUser = record\n    nick: string[14];\n    name: string[10];\n    channels: array[1..10] of string;\n    flags: string[20];\n    away: string[255];\n    buf: string;\n    auth: Boolean;\n    NeedSym: Integer;\n  end;\n\n  TForm1 = class(TForm)\n    ServerSocket1: TServerSocket;\n    redt1: TRichEdit;\n    btn1: TButton;\n    ClientSocket1: TClientSocket;\n    procedure ServerSocket1Accept(Sender: TObject;\n      Socket: TCustomWinSocket);\n    procedure ServerSocket1ClientRead(Sender: TObject;\n      Socket: TCustomWinSocket);\n    procedure FormCreate(Sender: TObject);\n    procedure btn1Click(Sender: TObject);\n  private\n    { Private declarations }\n  public\n    { Public declarations }\n  end;\nvar\n  Form1: TForm1;\n  users_count, i: Integer;\n\nimplementation\n\n{$R *.dfm}\n\n\nprocedure TForm1.ServerSocket1ClientRead(Sender: TObject;\n  Socket: TCustomWinSocket);\nvar\n  s, ss: widestring;\n  pp: PUser;\n  Byte1: ^byte;\n  command: word;\n  len: word;\n  msg: TMsg;\n  bb: PMsg;\nbegin\n  pp := Socket.Data;\n  new(byte1);\n  byte1:=nil;\n\n Socket.ReceiveBuf(bb,Socket.ReceiveLength);  //\n  ShowMessage(bb.str);                        //\xd0\xa0\xd0\x90\xd0\x91\xd0\x9e\xd0\xa2\xd0\x90\xd0\x95\xd0\xa2\n  ShowMessage(IntToStr(bb.byte_1));           //\n\n  repeat\n    Socket.ReceiveBuf(byte1, 1);              //\xd0\xbd\xd0\xb5 \xd1\x80\xd0\xb0\xd0\xb1\xd0\xbe\xd1\x82\xd0\xb0\xd0\xb5\xd1\x82\n    if byte1^ = $1 then\n    begin\n      Socket.ReceiveBuf(command, 2);\n      if command = $1 then\n        Socket.SendText(\'1\');\n      if command = $2 then\n        Socket.SendText(\'2\');\n    end;\n  until Socket.ReceiveLength = 0;\n  Socket.Data := pp;\n  form1.redt1.Lines.Add(pp.nick);\nend;\n\nprocedure TForm1.btn1Click(Sender: TObject);\nvar pac1: PMsg;\n    s:WideString;\nbegin\n  s:=\'ytuiyioo\';\n  new(pac1);\n  pac1.byte_1:=$1;\n  pac1.command:=$1;\n  pac1.len:=SizeOf(s);\n  pac1.str:=s;\n  ClientSocket1.Socket.SendBuf(pac1,sizeof(pac1));\n\nend;</code></pre></p> <p align="right"><span style="font-size: 60%">Add a code snippet to your website: <a href="https://www.paste.org" target="_blank">www.paste.org</a></span></p> </body> </html>'